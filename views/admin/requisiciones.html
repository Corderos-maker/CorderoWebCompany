<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Requisiciones</title>
    <link rel="stylesheet" href="../../resources/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../resources/css/general.css">
    <link rel="stylesheet" href="../../resources/css/bootstrap-icons.min.css">
</head>

<body>
    <!-- Contenido principal del documento -->
    <main>
        <h2 id="mainTitle"></h2>
        <!-- titulo principal -->
        <div class="container-fluid">
            <div class="row py-4">
                <h3 class="fw-bold "><i class="bi bi-card-checklist"></i> Requisiciones en aprobación</h3>
                <h6 class="fw-medium text-secondary">Esta es la sección para poder administrar las requisiciones
                    pedidas por cada una de las duplas. Se puede cambiar la cantidad de material, se puede visualizar
                    los materiales solicitados, aprobar, anular o
                    generar un documento PDF.</h6>
            </div>
        </div>
        <div class="row">
            <!-- formulario de búsqueda -->
            <form class="col-12 my-4" id="searchForm">
                <div class="row">
                    <div class="col-4">
                        <input type="search" class="form-control fs-3" name="search" placeholder="Buscar..." required>
                    </div>
                    <div class="col-8">
                        <button type="submit" class="btn btn-success mt-2">
                            <h4>
                                <i class="bi bi-search"></i>
                            </h4>
                        </button>
                        <a href="papelera.html" class="btn btn-warning mt-2" role="button">
                            <h4>
                                <i class="bi bi-trash-fill"></i>
                                Papelera
                            </h4>
                        </a>
                        <a href="historial.html" class="btn btn-info mt-2" role="button">
                            <h4>
                                <i class="bi bi-clock-history"></i>
                                Historial
                            </h4>
                        </a>
                        <button type="button" class="btn btn-warning mt-2" onclick="openCreate()">
                            <h4>
                                <i class="bi bi-clipboard-plus-fill"></i>
                                Crear Requisición
                            </h4>
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <!-- tabla para mostrar la tabla de contenido -->
        <table class="table table-hover">
            <thead>
                <tr>
                    <td colspan="6" id="rowsFound"></td>
                </tr>
                <tr>
                    <th>Código dupla</th>
                    <th>Fecha Generada</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <!-- cuerpo de la tabla de contenido -->
            <tbody id="tableBody"></tbody>
        </table>

        <!-- modal para mostrar los materiales de cada requisición -->
        <div class="modal fade" id="saveModal" data-bs-keyboard="false">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header flex-column align-items-start" id="modalHeader">
                    </div>
                    <div class="modal-body" id="modalBody">
                        <table class="table table-striped">
                            <thead>
                                <tr id="tableColumns">
                                    <th>MATERIAL</th>
                                    <th>CANTIDAD</th>
                                    <th>ACCIONES</th>
                                </tr>
                            </thead>
                            <tbody id="modalTableBody"></tbody>
                        </table>
                    </div>
                    <div class="modal-footer" id="modalFooter">
                    </div>
                </div>
            </div>
        </div>

        <!-- modal para mostrar la dupla para generar la requisición -->
        <div class="modal fade" id="duplaModal" data-bs-keyboard="false">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header ">
                        <h5 class="modal-title">Generar requisición</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form id="requisicionForm">
                        <div class="modal-body" id="modalBody">
                            seleccione una dupla para poder asignarle materiales a la requisición
                            <select name="duplaRequisicion" id="duplaRequisicion" class="form-select my-2" required>

                            </select>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button type="submit" class="btn btn-primary">Crear Requisición</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- modal para editar la cantidad de materiales -->
        <div class="modal fade" id="itemModal" data-bs-keyboard="false">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header flex-column align-items-start">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        <h1>Cambiar cantidad de material</h1>
                        <h3 id="materialName">nombre</h3>
                    </div>
                    <form id="itemForm">
                        <div class="modal-body row">
                            <input type="number" class="d-none" id="idDetalle" name="idDetalle">
                            <input type="number" class="d-none" id="idDetalleMaterial" name="idDetalleMaterial">
                            <div class="col-sm-12">
                                <label for="cantidadMaterial" class="form-label">Cantidad</label>
                                <input id="cantidadMaterial" type="number" name="cantidadMaterial" min="1"
                                    class="form-control" required>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary" id="materialButton">Guardar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- IMPORTACIÓN DE ARCHIVOS JAVASCRIPT -->
    <!-- Llamada al framework y librería de mensajes -->
    <script src="../../resources/js/bootstrap.bundle.min.js"></script>
    <script src="../../resources/js/sweetalert.min.js"></script>
    <!-- Llamada al controlador general de la aplicación -->
    <script type="text/javascript" src="../../controllers/utils/components.js"></script>
    <!-- Llamada al controlador del sitio privado -->
    <script type="text/javascript" src="../../controllers/utils/admin.js"></script>
    <!-- ? Llama al validador de textos -->
    <script src="../../controllers/utils/inputValidator.js"></script>
    <!-- Llamada al controlador de la página web -->
    <script src="../../controllers/admin/requisiciones.js"></script>
    <!-- ! cambiar el link js para el controntrolador -->

</body>

</html>